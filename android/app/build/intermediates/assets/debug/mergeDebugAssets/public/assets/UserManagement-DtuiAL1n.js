import{r as h,j as e}from"./react-DHBI0EtI.js";import{u as f}from"./formik-COfibRyj.js";import{c as j,a as m}from"./yup-Cbev0jF0.js";import{L as w}from"./react-router-dom-DfnLAedG.js";import{j as u,D as b,B as S,A as c,k as q,l as F}from"./flowbite-react-Bkuqc2tl.js";import{E as L,G as $}from"./react-icons-Bv9z3nYI.js";import{f as v}from"./profileFaker-BHvBl0Hw.js";import"./classnames-C9FZUsQl.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-dVqQl90_.js";import"./react-fast-compare-CnCej0V4.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-C0HQooLr.js";import"./react-dom-B4HDzmPo.js";import"./scheduler-CzFDRTuY.js";import"./react-router-CxejpPFA.js";import"./@remix-run-B-RBrVrq.js";import"./tailwind-merge-Du4_Do6r.js";import"./debounce-B36raNOm.js";import"./@floating-ui-CybHMkaK.js";import"./tabbable-DNPBiPWX.js";const B=({index:o,onChange:l})=>{const[n,x]=h.useState({nom:"",prenom:"",school:"",classe:""}),i=d=>{const{name:t,value:g}=d.target;x({...n,[t]:g}),l(o,{...n,[t]:g})};return e.jsxs("div",{children:[e.jsxs("h5",{className:"text-1xl font-bold tracking-tight text-blue-600 dark:text-white text-left",children:[" Enfant ",o+1," "]}),e.jsx(u,{variant:"outlined",label:"Nom",sizing:"sm",id:`nom-${o}`,name:"nom",onChange:i,value:n.nom}),e.jsx(u,{variant:"outlined",label:"Prenom",sizing:"sm",id:`prenom-${o}`,name:"prenom",onChange:i,value:n.prenom}),e.jsx(u,{variant:"outlined",label:"Ecole",sizing:"sm",id:`school-${o}`,name:"school",onChange:i,value:n.school}),e.jsx(u,{variant:"outlined",label:"Classe",sizing:"sm",id:`classe-${o}`,name:"classe",onChange:i,value:n.classe})]})};function A(o){const[l,n]=h.useState(0);return h.useEffect(()=>{o.handleChildCounter(l)},[l]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex items-center max-w-[8rem]",children:[e.jsx("button",{onClick:()=>n(l<=0?0:l-1),type:"button",id:"decrement-button","data-input-counter-decrement":"quantity-input",className:"bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:border-gray-600 hover:bg-gray-200 border border-gray-300 rounded-s-lg p-3 h-11 focus:ring-gray-100 dark:focus:ring-gray-700 focus:ring-2 focus:outline-none",children:e.jsx("svg",{className:"w-3 h-3 text-gray-900 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h16"})})}),e.jsx("input",{value:l,type:"text",id:"quantity-input","data-input-counter":!0,"data-input-counter-min":"0","aria-describedby":"helper-text-explanation",className:"bg-gray-50 border-x-0 border-gray-300 h-11 text-center text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"1",required:!0}),e.jsx("button",{onClick:()=>n(l+1),type:"button",id:"increment-button","data-input-counter-increment":"quantity-input",className:"bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:border-gray-600 hover:bg-gray-200 border border-gray-300 rounded-e-lg p-3 h-11 focus:ring-gray-100 dark:focus:ring-gray-700 focus:ring-2 focus:outline-none",children:e.jsx("svg",{className:"w-3 h-3 text-gray-900 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})})]})})}const P=[{id:1,name:"math"},{id:1,name:"fraÃ§ais"},{id:1,name:"guitare"},{id:1,name:"yoga"},{id:1,name:"piano"}],z=v;console.log("users",z);function E(o){const l=o.handleSubmitUser;console.log("handleSubmitUser",l);const[n,x]=h.useState(0),i=a=>{x(a)},[d,t]=h.useState([]),[g,C]=h.useState([]),k=(a,s)=>{a.target.checked?t([...d,s]):t(d.filter(p=>p!==s))},y=(a,s)=>{const p=[...g];p[a]=s,C(p)},N=j({nom:m().required("Le nom est requis"),prenom:m().required("Le prénom est requis"),email:m().email("Format d'email invalide").required("L'email est requis"),role:m().required("Le rôle est requis")}),r=f({initialValues:{nom:"",prenom:"",email:"",role:"parent"},validationSchema:N,onSubmit:a=>{const s={user:{firstName:a.nom,lastName:a.prenom,role:a.role,email:a.email},subject:d,children:g};console.log(s),alert(`Nouveau utilisateur ajouté
${JSON.stringify(s,null,2)}`)}});return e.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:e.jsxs("form",{onSubmit:r.handleSubmit,className:"flex flex-col gap-4 w-full mx-auto",children:[e.jsxs("div",{className:"col-grid-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("select",{id:"role",name:"role",onChange:r.handleChange,value:r.values.role,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"intervenant",children:"Intervenant"}),e.jsx("option",{value:"admin",children:"Administrateur"})]})}),e.jsx("div",{children:e.jsx(b,{label:"Sujets",dismissOnClick:!1,color:"gray",theme:{floating:{target:"w-full"}},children:P.map(a=>e.jsx(b.Item,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:a.name,checked:d.includes(a.name),onChange:s=>k(s,a.name),className:"checkbox"}),e.jsx("label",{htmlFor:a.name,className:"flex",children:a.name})]})},a.name))})})]}),e.jsx(u,{variant:"outlined",label:"Nom",sizing:"sm",id:"nom",name:"nom",onChange:r.handleChange,value:r.values.nom}),r.touched.nom&&r.errors.nom?e.jsx("div",{children:r.errors.nom}):null,e.jsx(u,{variant:"outlined",label:"Prenom",sizing:"sm",id:"prenom",name:"prenom",onChange:r.handleChange,value:r.values.prenom}),r.touched.prenom&&r.errors.prenom?e.jsx("div",{children:r.errors.prenom}):null,e.jsx(u,{variant:"outlined",label:"✉ name@email.com",sizing:"sm",id:"email",name:"email",onChange:r.handleChange,value:r.values.email}),r.touched.email&&r.errors.email?e.jsx("div",{children:r.errors.email}):null,e.jsxs("span",{className:"flex items-center ",children:[e.jsx("span",{children:" Nb. enfants"})," ",e.jsx(A,{handleChildCounter:i})]}),Array.from({length:n},(a,s)=>e.jsx(B,{index:s,onChange:y},s))]}),e.jsx(S,{type:"submit",children:"Submit"})]})})}const D=v,se=({handleSubmitUser:o})=>{const[l,n]=h.useState(0);console.log("childCounterFromControlButton",l),console.log("setChildCounterFromControlButton",n);const x=j({nom:m().required("Le prénom est requis"),prenom:m().required("Le nom est requis"),email:m().email("Format d'email invalide").required("L'email est requis")}),i=f({initialValues:{nom:"",prenom:"",email:""},validationSchema:x,onSubmit:t=>{console.log(t),alert("Nouveau utilisateur ajouté")}});return console.log("formik",i),console.log("color","text-red-800"),e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-2xl font-bold tracking-tight text-blue-800 dark:text-white my-3",children:"Gestion des utilisateurs"}),e.jsx("div",{className:" flex flex-col gap-4 w-full md:w-1/2 lg:w-1/2 mx-auto",children:e.jsxs(c,{collapseAll:!0,className:"w-full ",children:[e.jsxs(c.Panel,{className:"",children:[e.jsx(c.Title,{className:"hover:bg-vlue-700 text-left bg-blue-700 text-white",children:e.jsxs("span",{className:" relative flex gap-2 p-1 text-xl  font-bold tracking-tight  text-white dark:text-white",children:[e.jsxs("span",{children:[e.jsx(L,{})," "]})," ",e.jsx("span",{children:"Ajouter un utilisateur "})]})}),e.jsx(c.Content,{children:e.jsx(E,{handleSubmitUser:o})})]}),e.jsx("div",{children:D.map(t=>e.jsxs(c.Panel,{className:"",children:[e.jsx(c.Title,{className:"hover:bg-violet-100",children:e.jsxs("div",{className:" lg:w-[500px]  grid grid-cols-3 gap-4 ",children:[e.jsxs("span",{className:"flex gap-5 col-span-2",children:[e.jsx(q,{className:"w-auto",img:t.file,alt:`${t.firstname} ${t.lastname}`,rounded:!0,size:"sm"}),e.jsx("p",{className:"truncate text-left text-sm font-medium text-gray-900 dark:text-white",children:`${t.firstname} ${t.lastname}`})]}),e.jsx(w,{to:`/delete-user/${t.id}`,className:`flex justify-end  ${t.delete==="1"?"text-red-800":t.delete==="2"?"text-green-800":"text-gray-400"}`,children:e.jsx(F,{content:`${t.delete==="1"?"demande":t.delete==="2"?"non-conforme":"suppresion"}`,style:"light",children:e.jsx($,{})})})]})}),e.jsxs(c.Content,{children:[e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("p",{className:"truncate text-sm text-gray-500 dark:text-gray-400",children:t.email})}),e.jsx("div",{className:"inline-flex items-center text-base font-semibold text-gray-900 dark:text-white",children:t.phone}),e.jsxs("ul",{className:"truncate text-sm text-gray-500 dark:text-gray-400",children:["Enfants :",e.jsx("li",{children:"Léa classe : CM1"}),e.jsx("li",{children:"Leo classe : CP"})]})]})]},t.id))})]})})]})};export{se as default};
//# sourceMappingURL=UserManagement-DtuiAL1n.js.map
