import{j as e,r as u}from"./react-DHBI0EtI.js";import{m as g,B as h,C as N,o as m,a as l,T as n}from"./flowbite-react-Bkuqc2tl.js";import{J as v,K as w,D as y}from"./react-icons-Bv9z3nYI.js";import{u as F}from"./formik-COfibRyj.js";import{c as C,a as c}from"./yup-Cbev0jF0.js";import{L as P}from"./react-router-dom-DfnLAedG.js";import{f as D}from"./profileFaker-BHvBl0Hw.js";import{e as S}from"./react-router-CxejpPFA.js";import"./classnames-C9FZUsQl.js";import"./tailwind-merge-Du4_Do6r.js";import"./debounce-B36raNOm.js";import"./@floating-ui-CybHMkaK.js";import"./react-dom-B4HDzmPo.js";import"./scheduler-CzFDRTuY.js";import"./tabbable-DNPBiPWX.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-dVqQl90_.js";import"./react-fast-compare-CnCej0V4.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-C0HQooLr.js";import"./@remix-run-B-RBrVrq.js";function T(){return e.jsx(e.Fragment,{children:e.jsxs(g,{className:"flex justify-center items-center mr-5 sm:mr-0 sm:my-40",outline:!1,pill:!1,children:[e.jsxs(h,{color:"gray",className:"sm:w-96 bg-blue-700 text-white",disabled:!0,children:[e.jsx(v,{className:"mr-3 h-4 w-4"}),"À propos de vous"]}),e.jsx(P,{to:"/my-account",children:e.jsxs(h,{color:"gray",className:"sm:w-96 -z-10",children:[e.jsx(w,{className:"mr-3 h-4 w-4"}),"Mon compte"]})})]})})}async function k(){try{return D}catch(o){console.log(o)}}function ae(o){const{idProfile:d}=S(),[a,p]=u.useState(null);u.useEffect(()=>{(async()=>{const i=await k();if(i){const x=i.find(f=>f.id.toString()===d);p(x?{...x}:null)}})()},[d]);const t={id:0,file:"",firstname:"",lastname:"",password:"",birthDate:null,email:"",phone:""};a&&(t.file=a.file,t.firstname=a.firstname,t.lastname=a.lastname,t.password=a.password,t.birthDate=a.birthDate,t.email=a.email,t.phone=a.phone);const s=F({initialValues:t,validationSchema:C({file:c().min(3,"minimum 3 caractères").max(25,"maximum 25 caractères"),firstname:c().min(3,"minimum 3 caractères").max(25,"maximum 25 caractères"),lastname:c().min(3,"minimum 3 caractères").max(25,"maximum 25 caractères"),password:c().min(3,"minimum 3 caractères"),email:c().email(),phone:c().min(3,"minimum 10 caractères")}),onSubmit:r=>{const i={...a,...r,birthDate:r.birthDate?new Date(r.birthDate):null,id:(a==null?void 0:a.id)??0};j(i),s.resetForm(),alert("Votre profil a bien été mis à jour!")}}),b=a!=null&&a.birthDate?a.birthDate.toISOString().substr(0,10):void 0,j=r=>{if(a){const i={...a,...r,id:a.id};o.handleSubmitProfile(i)}};return e.jsxs(e.Fragment,{children:[e.jsx(T,{}),a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center font-bodyTest scale-110 sm:scale:100 mt-20 sm:mt-15",children:e.jsx(N,{className:"w-96 bg-gray-50 shadow-lg m-8",children:e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsx("input",{type:"file",id:"picture",name:"picture",className:"mb-2 max-w-xs break-words",onChange:s.handleChange,value:s.values.file}),e.jsx("br",{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{id:"publicPicture"}),e.jsx(l,{htmlFor:"publicPicture",children:"public"})]}),e.jsx("br",{}),e.jsx(n,{id:"firstname",type:"text",name:"firstname",className:"mb-2",onChange:s.handleChange,value:s.values.firstname!==""?s.values.firstname:a==null?void 0:a.firstname,helperText:e.jsx(e.Fragment,{children:e.jsx("span",{className:"font-medium",children:s.errors.firstname})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{id:"publicFirstname"}),e.jsx(l,{htmlFor:"publicFirstname",children:"public"})]}),e.jsx("br",{}),e.jsx(n,{id:"lastname",type:"text",name:"lastname",className:"mb-2",onChange:s.handleChange,value:s.values.lastname!==""?s.values.lastname:a==null?void 0:a.lastname,helperText:e.jsx(e.Fragment,{children:e.jsx("span",{className:"font-medium",children:s.errors.lastname})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{id:"publicLastname"}),e.jsx(l,{htmlFor:"publicLastname",children:"public"})]}),e.jsx("br",{}),e.jsx(n,{id:"password",type:"password",name:"password",className:"mb-2",onChange:s.handleChange,value:s.values.password!==""?s.values.password:a==null?void 0:a.password,helperText:e.jsx(e.Fragment,{children:e.jsx("span",{className:"font-medium",children:s.errors.password})})}),e.jsx("br",{}),e.jsx(n,{id:"birthDate",type:"date",name:"birthDate",className:"mb-2",onChange:s.handleChange,value:b,disabled:!0,helperText:e.jsx(e.Fragment,{children:e.jsx("span",{className:"font-medium",children:s.errors.birthDate})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{id:"publicBirthDate"}),e.jsx(l,{htmlFor:"publicBirthDate",children:"public"})]}),e.jsx("br",{}),e.jsx(n,{id:"email",type:"email",name:"email",className:"mb-2",onChange:s.handleChange,value:s.values.email!==""?s.values.email:a==null?void 0:a.email,helperText:e.jsx(e.Fragment,{children:e.jsx("span",{className:"font-medium",children:s.errors.email})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{id:"publicEmail"}),e.jsx(l,{htmlFor:"publicEmail",children:"public"})]}),e.jsx("br",{}),e.jsx(n,{id:"phone",type:"text",name:"phone",className:"mb-2",onChange:s.handleChange,value:s.values.phone!==""?s.values.phone:a==null?void 0:a.phone,helperText:e.jsx(e.Fragment,{children:e.jsx("span",{className:"font-medium",children:s.errors.phone})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{id:"publicPhone"}),e.jsx(l,{htmlFor:"publicPhone",children:"public"})]}),e.jsx("br",{}),e.jsx("span",{className:"before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-blue-700 relative flex gap-2 p-1 mt-2 flex justify-center items-center",children:e.jsxs(h,{className:"bg-blue-700",children:[e.jsx("span",{className:"relative text-white m-1",children:"Actualiser"})," ",e.jsx("span",{children:e.jsx(y,{className:"relative text-white h-5 w-5"})})]})})]})})})}):e.jsxs("p",{className:"font-bodyTest text-2xl my-32 italic text-orange-500",children:["Aucun profil n'existe avec l'id: ",d]})]})}export{ae as default};
//# sourceMappingURL=UserEditProfilePage-LsDnwLty.js.map
